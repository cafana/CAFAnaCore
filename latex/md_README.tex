\DoxyHorRuler{0}


{\itshape Package author}\+: C. Backhouse \href{mailto:c.backhouse@ucl.ac.uk}{\texttt{ c.\+backhouse@ucl.\+ac.\+uk}}

{\itshape Build system}\+: J. Wolcott \href{mailto:jwolcott@fnal.gov}{\texttt{ jwolcott@fnal.\+gov}}

\DoxyHorRuler{0}


This document briefly describes the build process of the CAFAna framework contained in this package.\hypertarget{md_README_autotoc_md3}{}\doxysection{Prerequisites}\label{md_README_autotoc_md3}

\begin{DoxyItemize}
\item A compiler that understands C++14 (tested with gcc)
\item ROOT v6.\+00.\+00 or above
\end{DoxyItemize}\hypertarget{md_README_autotoc_md4}{}\doxysection{Build}\label{md_README_autotoc_md4}
The package should be built using CMake.

CMake builds are \textquotesingle{}out-\/of-\/source\textquotesingle{} --- that is, they use a dedicated build directory that you can put anywhere. In this example, we\textquotesingle{}ll use a build directory that is a subdirectory of the source root (that is, the directory containing this file).

By default, the generated libraries and test executables are installed back into the source tree at {\ttfamily lib/} and {\ttfamily bin/}, respecively. If you\textquotesingle{}d like to put them somewhere else, pass {\ttfamily -\/DCMAKE\+\_\+\+INSTALL\+\_\+\+PREFIX=/path/to/dir} (where {\ttfamily /path/to/dir} is where you\textquotesingle{}d like them to be installed) in the {\ttfamily cmake} command below.


\begin{DoxyCode}{0}
\DoxyCodeLine{\$ mkdir build}
\DoxyCodeLine{\$ cd build}
\DoxyCodeLine{\$ cmake ..}
\DoxyCodeLine{\$ make install}

\end{DoxyCode}
\hypertarget{md_README_autotoc_md5}{}\doxysection{How to build and and test your changes locally}\label{md_README_autotoc_md5}

\begin{DoxyItemize}
\item {\ttfamily export QUALIFIER=e19\+:prof} or {\ttfamily e17\+:debug}, etc
\item {\ttfamily jenkins/jenkins\+\_\+build.\+sh} (or paste parts of it into your terminal)
\item set {\ttfamily CAFANACORE\+\_\+\+LIB} and {\ttfamily CAFANACORE\+\_\+\+INC} manually to point to what you just built
\item rebuild your test release
\item {\ttfamily export CAFANA\+\_\+\+DISABLE\+\_\+\+VERSION\+\_\+\+CHECK=1}
\item Profit!
\end{DoxyItemize}\hypertarget{md_README_autotoc_md6}{}\doxysection{How to build with jenkins}\label{md_README_autotoc_md6}

\begin{DoxyCode}{0}
\DoxyCodeLine{git push}
\DoxyCodeLine{git tag \$NEW\_TAG\_NUMBER}
\DoxyCodeLine{git push -\/-\/tags}

\end{DoxyCode}



\begin{DoxyItemize}
\item Navigate to \href{https://buildmaster.fnal.gov/buildmaster/view/Nova/job/external/job/cafanacore_build/}{\texttt{ https\+://buildmaster.\+fnal.\+gov/buildmaster/view/\+Nova/job/external/job/cafanacore\+\_\+build/}} and click \char`\"{}\+Build Now\char`\"{}.
\item Wait
\end{DoxyItemize}\hypertarget{md_README_autotoc_md7}{}\doxysection{How to deploy}\label{md_README_autotoc_md7}

\begin{DoxyCode}{0}
\DoxyCodeLine{wget https://buildmaster.fnal.gov/buildmaster/view/Nova/job/external/job/cafanacore\_collect/lastSuccessfulBuild/artifact/*zip*/archive.zip}
\DoxyCodeLine{unzip archive.zip}
\DoxyCodeLine{mv archive/* .}
\DoxyCodeLine{rm archive.zip}
\DoxyCodeLine{}
\DoxyCodeLine{ssh cvmfs\$\{EXPERIMENT\}@oasiscfs.fnal.gov}
\DoxyCodeLine{cvmfs\_server transaction \$\{EXPERIMENT\}.opensciencegrid.org}
\DoxyCodeLine{\# fetch the files you extracted previously to the correct /cvmfs directory}
\DoxyCodeLine{cd /cvmfs/ ... /cafanacore/\$NEW\_TAG\_NUMBER/include}
\DoxyCodeLine{ln -\/s . CAFAnaCore \# can't be done earlier because neither jenkins or scp like symlinks}
\DoxyCodeLine{ln -\/s CAFAna/Core/ cafanacore}
\DoxyCodeLine{cd -\/}
\DoxyCodeLine{cvmfs\_server publish \$\{EXPERIMENT\}.opensciencegrid.org}

\end{DoxyCode}
\hypertarget{md_README_autotoc_md8}{}\doxysubsection{For NOvA}\label{md_README_autotoc_md8}
Update {\ttfamily CAFAna/\+Core/\+Version\+Check.\+cxx}, {\ttfamily setup/nova-\/offline-\/ups-\/externals-\/development}, and {\ttfamily nova-\/offline-\/ups-\/externals-\/development-\/prof}. Notify {\ttfamily \#cmake}\hypertarget{md_README_autotoc_md9}{}\doxysubsection{For DUNE}\label{md_README_autotoc_md9}
Update {\ttfamily cmake/ups\+\_\+env\+\_\+setup.\+sh}\hypertarget{md_README_autotoc_md10}{}\doxysection{Usage}\label{md_README_autotoc_md10}
Coming soon! 